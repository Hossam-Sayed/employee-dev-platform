<mat-toolbar color="primary" class="shadow-sm">
  <span class="d-flex align-items-center me-4">
    <span class="fw-semibold fs-5">EDP App</span>
  </span>

  <span class="flex-spacer"></span>

  @if(tokenService.isLoggedIn()) {
  <div class="d-none d-md-flex align-items-center">
    <button mat-button (click)="goTo('/inside')">Dashboard</button>
    <button mat-button [matMenuTriggerFor]="careerMenu">Career Package</button>
    <mat-menu #careerMenu="matMenu">
      @if(authService.isAdmin()) {
        <button mat-menu-item (click)="goTo('/career-package/templates')">
          Templates
        </button>
      }
      <button mat-menu-item (click)="goTo('/career-package/my-package')">
        My Package
      </button>
      <button
        mat-menu-item
        (click)="goTo('/career-package/submissions/managed')"
      >
        Managed
      </button>
    </mat-menu>

    <button mat-button [matMenuTriggerFor]="libraryMenu">Library</button>
    <mat-menu #libraryMenu="matMenu">
      <button mat-menu-item (click)="goTo('/library/my-materials')">
        My Materials
      </button>
    </mat-menu>

    <button mat-stroked-button color="warn" (click)="onLogout()">Logout</button>
  </div>

  <div class="d-md-none">
    <button mat-icon-button [matMenuTriggerFor]="mobileMainMenu">
      <mat-icon>menu</mat-icon>
    </button>
    <mat-menu #mobileMainMenu="matMenu">
      <button mat-menu-item (click)="goTo('/inside')">Dashboard</button>

      <button mat-menu-item [matMenuTriggerFor]="mobileCareerMenu">
        Career Package
      </button>
      <mat-menu #mobileCareerMenu="matMenu">
        @if(authService.isAdmin()) {
          <button mat-menu-item (click)="goTo('/career-package/templates')">
            Templates
          </button>
        }

        <button mat-menu-item (click)="goTo('/career-package/my-package')">
          My Package
        </button>
        <button
          mat-menu-item
          (click)="goTo('/career-package/submissions/managed')"
        >
          Managed
        </button>
      </mat-menu>

      <button mat-menu-item [matMenuTriggerFor]="mobileLibraryMenu">
        Library
      </button>
      <mat-menu #mobileLibraryMenu="matMenu">
        <button mat-menu-item (click)="goTo('/library/my-materials')">
          My Materials
        </button>
      </mat-menu>

      <button mat-menu-item (click)="onLogout()">Logout</button>
    </mat-menu>
  </div>

  <button
    mat-icon-button
    [matMenuTriggerFor]="notificationMenu"
    [matBadge]="unreadCount()"
    matBadgeColor="warn"
    [matBadgeHidden]="unreadCount() === 0"
    [matBadgeOverlap]="false"
    aria-label="Notifications"
    class="notification-icon-button"
  >
    <mat-icon>notifications</mat-icon>
  </button>

  <mat-menu #notificationMenu="matMenu" [overlapTrigger]="false">
    <app-notification-list
      [notifications]="notifications() ?? []"
      (notificationClick)="onNotificationClick($event)"
    ></app-notification-list>
  </mat-menu>

  }
</mat-toolbar>
