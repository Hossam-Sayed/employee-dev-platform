<div class="container py-4">
  <h2 class="text-center mb-4">Managed Submissions</h2>

  @if (loading()) {
    <div class="d-flex justify-content-center my-5">
      <mat-spinner></mat-spinner>
    </div>
  } @else if (submissions().length > 0) {
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
      @for (submission of submissions(); track submission.id) {
        <div class="col">
          <mat-card class="d-flex flex-column h-100 mat-elevation-z3">
            <mat-card-header class="d-flex justify-content-between align-items-start">
              <div class="d-flex flex-column">
                <mat-card-title class="fs-5 mb-1">
                  {{ submission.user.firstName }} {{ submission.user.lastName }}
                </mat-card-title>
                <mat-card-subtitle class="text-muted">
                  {{ submission.user.email }}
                </mat-card-subtitle>
              </div>
              <button
                mat-icon-button
                [routerLink]="['/career-package/submissions/action', submission.id]"
                matTooltip="Review Submission"
                class="ms-auto"
              >
                <mat-icon>edit</mat-icon>
              </button>
            </mat-card-header>
            <mat-card-content class="mt-3">
              <p class="mb-1"><strong>Status:</strong>
                <span class="badge ms-2"
                  [ngClass]="{
                    'bg-success': submission.status === 'APPROVED',
                    'bg-warning text-dark': submission.status === 'PENDING',
                    'bg-danger': submission.status === 'REJECTED'
                  }"
                >
                  {{ submission.status }}
                </span>
              </p>
              <p class="mb-1"><strong>Submitted:</strong> {{ submission.submittedAt | date:'mediumDate' }}</p>
            </mat-card-content>
          </mat-card>
        </div>
      }
    </div>
  } @else {
    <div class="alert alert-info text-center" role="alert">
      You have no Managed Submissions
    </div>
  }
</div>